import { MergedData } from "./MergedData.js";

describe("MergedData test ", () => {
  test("Test addEntry single object.", () => {
    const md = new MergedData();
    md.addEntry({ participantId: "1", property1: "value1" });
    md.addEntry({ participantId: "1", property2: "value2" });
    md.callbackOnEntries((value, key) => {
      expect(value).toBeStrict({
        participantId: "1",
        property1: "value1",
        property2: "value2",
        sessionId: "",
        studyId: "",
        treatmentId: "",
        consentShownTimestamp: "",
        consentCompletedTimestamp: "",
        consentTimeSec: "",
        demographicShownTimestamp: "",
        demographicCompletedTimestamp: "",
        demographicTimeSec: "",
        introductionShownTimestamp: "",
        introductionCompletedTimestamp: "",
        introductionTimeSec: "",
        instructionsShownTimestamp: "",
        instructionsCompletedTimestamp: "",
        instructionsTimeSec: "",
        attentionCheckShownTimestamp: "",
        attentionCheckCompletedTimestamp: "",
        attentionCheckTimeSec: "",
        experienceSurveyQuestionsShownTimestamp: "",
        experienceSurveyQuestionsCompletedTimestamp: "",
        experienceSurveyTimeSec: "",
        financialLitSurveyQuestionsShownTimestamp: "",
        financialLitSurveyQuestionsCompletedTimestamp: "",
        financialLitSurveyTimeSec: "",
        purposeSurveyQuestionsShownTimestamp: "",
        purposeSurveyQuestionsCompletedTimestamp: "",
        purposeSurveyTimeSec: "",
        debriefShownTimestamp: "",
        debriefCompletedTimestamp: "",
        debriefTimeSec: "",
        consentChecked: "",
        countryOfResidence: "",
        vizFamiliarity: "",
        age: "",
        gender: "",
        selfDescribeGender: "",
        profession: "",
        userAgent: "",
        position_1: "",
        viewType_1: "",
        interaction_1: "",
        variableAmount_1: "",
        amountEarlier_1: "",
        timeEarlier_1: "",
        dateEarlier_1: "",
        amountLater_1: "",
        timeLater_1: "",
        dateLater_1: "",
        maxAmount_1: "",
        maxTime_1: "",
        verticalPixels_1: "",
        horizontalPixels_1: "",
        leftMarginWidthIn_1: "",
        bottomMarginHeightIn_1: "",
        graphWidthIn_1: "",
        graphHeightIn_1: "",
        widthIn_1: "",
        heightIn_1: "",
        showMinorTicks_1: "",
        choice_1: "",
        dragAmount_1: "",
        shownTimestamp_1: "",
        choiceTimestamp_1: "",
        highup_1: "",
        lowdown_1: "",
        choiceTimeSec_1: "",
        position_2: "",
        viewType_2: "",
        interaction_2: "",
        variableAmount_2: "",
        amountEarlier_2: "",
        timeEarlier_2: "",
        dateEarlier_2: "",
        amountLater_2: "",
        timeLater_2: "",
        dateLater_2: "",
        maxAmount_2: "",
        maxTime_2: "",
        verticalPixels_2: "",
        horizontalPixels_2: "",
        leftMarginWidthIn_2: "",
        bottomMarginHeightIn_2: "",
        graphWidthIn_2: "",
        graphHeightIn_2: "",
        widthIn_2: "",
        heightIn_2: "",
        showMinorTicks_2: "",
        choice_2: "",
        dragAmount_2: "",
        shownTimestamp_2: "",
        choiceTimestamp_2: "",
        highup_2: "",
        lowdown_2: "",
        choiceTimeSec_2: "",
        position_3: "",
        viewType_3: "",
        interaction_3: "",
        variableAmount_3: "",
        amountEarlier_3: "",
        timeEarlier_3: "",
        dateEarlier_3: "",
        amountLater_3: "",
        timeLater_3: "",
        dateLater_3: "",
        maxAmount_3: "",
        maxTime_3: "",
        verticalPixels_3: "",
        horizontalPixels_3: "",
        leftMarginWidthIn_3: "",
        bottomMarginHeightIn_3: "",
        graphWidthIn_3: "",
        graphHeightIn_3: "",
        widthIn_3: "",
        heightIn_3: "",
        showMinorTicks_3: "",
        choice_3: "",
        dragAmount_3: "",
        shownTimestamp_3: "",
        choiceTimestamp_3: "",
        highup_3: "",
        lowdown_3: "",
        choiceTimeSec_3: "",
        position_4: "",
        viewType_4: "",
        interaction_4: "",
        variableAmount_4: "",
        amountEarlier_4: "",
        timeEarlier_4: "",
        dateEarlier_4: "",
        amountLater_4: "",
        timeLater_4: "",
        dateLater_4: "",
        maxAmount_4: "",
        maxTime_4: "",
        verticalPixels_4: "",
        horizontalPixels_4: "",
        leftMarginWidthIn_4: "",
        bottomMarginHeightIn_4: "",
        graphWidthIn_4: "",
        graphHeightIn_4: "",
        widthIn_4: "",
        heightIn_4: "",
        showMinorTicks_4: "",
        choice_4: "",
        dragAmount_4: "",
        shownTimestamp_4: "",
        choiceTimestamp_4: "",
        highup_4: "",
        lowdown_4: "",
        choiceTimeSec_4: "",
        position_5: "",
        viewType_5: "",
        interaction_5: "",
        variableAmount_5: "",
        amountEarlier_5: "",
        timeEarlier_5: "",
        dateEarlier_5: "",
        amountLater_5: "",
        timeLater_5: "",
        dateLater_5: "",
        maxAmount_5: "",
        maxTime_5: "",
        verticalPixels_5: "",
        horizontalPixels_5: "",
        leftMarginWidthIn_5: "",
        bottomMarginHeightIn_5: "",
        graphWidthIn_5: "",
        graphHeightIn_5: "",
        widthIn_5: "",
        heightIn_5: "",
        showMinorTicks_5: "",
        choice_5: "",
        dragAmount_5: "",
        shownTimestamp_5: "",
        choiceTimestamp_5: "",
        highup_5: "",
        lowdown_5: "",
        choiceTimeSec_5: "",
        position_6: "",
        viewType_6: "",
        interaction_6: "",
        variableAmount_6: "",
        amountEarlier_6: "",
        timeEarlier_6: "",
        dateEarlier_6: "",
        amountLater_6: "",
        timeLater_6: "",
        dateLater_6: "",
        maxAmount_6: "",
        maxTime_6: "",
        verticalPixels_6: "",
        horizontalPixels_6: "",
        leftMarginWidthIn_6: "",
        bottomMarginHeightIn_6: "",
        graphWidthIn_6: "",
        graphHeightIn_6: "",
        widthIn_6: "",
        heightIn_6: "",
        showMinorTicks_6: "",
        choice_6: "",
        dragAmount_6: "",
        shownTimestamp_6: "",
        choiceTimestamp_6: "",
        highup_6: "",
        lowdown_6: "",
        choiceTimeSec_6: "",
        position_7: "",
        viewType_7: "",
        interaction_7: "",
        variableAmount_7: "",
        amountEarlier_7: "",
        timeEarlier_7: "",
        dateEarlier_7: "",
        amountLater_7: "",
        timeLater_7: "",
        dateLater_7: "",
        maxAmount_7: "",
        maxTime_7: "",
        verticalPixels_7: "",
        horizontalPixels_7: "",
        leftMarginWidthIn_7: "",
        bottomMarginHeightIn_7: "",
        graphWidthIn_7: "",
        graphHeightIn_7: "",
        widthIn_7: "",
        heightIn_7: "",
        showMinorTicks_7: "",
        choice_7: "",
        dragAmount_7: "",
        shownTimestamp_7: "",
        choiceTimestamp_7: "",
        highup_7: "",
        lowdown_7: "",
        choiceTimeSec_7: "",
        position_8: "",
        viewType_8: "",
        interaction_8: "",
        variableAmount_8: "",
        amountEarlier_8: "",
        timeEarlier_8: "",
        dateEarlier_8: "",
        amountLater_8: "",
        timeLater_8: "",
        dateLater_8: "",
        maxAmount_8: "",
        maxTime_8: "",
        verticalPixels_8: "",
        horizontalPixels_8: "",
        leftMarginWidthIn_8: "",
        bottomMarginHeightIn_8: "",
        graphWidthIn_8: "",
        graphHeightIn_8: "",
        widthIn_8: "",
        heightIn_8: "",
        showMinorTicks_8: "",
        choice_8: "",
        dragAmount_8: "",
        shownTimestamp_8: "",
        choiceTimestamp_8: "",
        highup_8: "",
        lowdown_8: "",
        choiceTimeSec_8: "",
        experience_survey_enjoy: "",
        experience_survey_clear: "",
        experience_survey_understand: "",
        experience_survey_present: "",
        experience_survey_imagine: "",
        experience_survey_easy: "",
        experience_survey_format: "",
        financial_lit_survey_numeracy: "",
        financial_lit_survey_inflation: "",
        financial_lit_survey_risk: "",
        purpose_survey_differnce: "",
        purpose_survey_better: "",
        purpose_survey_serve: "",
        purpose_survey_truly: "",
        purpose_survey_describe: "",
        purpose_survey_effort: "",
        feedback: "",
      });
    });
  });

  test("Test addEntry array of objects.", () => {
    const md = new MergedData();
    md.addEntry([
      { participantId: "1", position: 1, property1: "value1" },
      { participantId: "1", position: 2, property1: "value2" },
    ]);
    md.callbackOnEntries((value, key) => {
      expect(value).toBeStrict({
        participantId: "1",
        property1_1: "value1",
        property1_2: "value2",
        sessionId: "",
        studyId: "",
        treatmentId: "",
        consentShownTimestamp: "",
        consentCompletedTimestamp: "",
        consentTimeSec: "",
        demographicShownTimestamp: "",
        demographicCompletedTimestamp: "",
        demographicTimeSec: "",
        introductionShownTimestamp: "",
        introductionCompletedTimestamp: "",
        introductionTimeSec: "",
        instructionsShownTimestamp: "",
        instructionsCompletedTimestamp: "",
        instructionsTimeSec: "",
        attentionCheckShownTimestamp: "",
        attentionCheckCompletedTimestamp: "",
        attentionCheckTimeSec: "",
        experienceSurveyQuestionsShownTimestamp: "",
        experienceSurveyQuestionsCompletedTimestamp: "",
        experienceSurveyTimeSec: "",
        financialLitSurveyQuestionsShownTimestamp: "",
        financialLitSurveyQuestionsCompletedTimestamp: "",
        financialLitSurveyTimeSec: "",
        purposeSurveyQuestionsShownTimestamp: "",
        purposeSurveyQuestionsCompletedTimestamp: "",
        purposeSurveyTimeSec: "",
        debriefShownTimestamp: "",
        debriefCompletedTimestamp: "",
        debriefTimeSec: "",
        consentChecked: "",
        countryOfResidence: "",
        vizFamiliarity: "",
        age: "",
        gender: "",
        selfDescribeGender: "",
        profession: "",
        userAgent: "",
        position_1: "",
        viewType_1: "",
        interaction_1: "",
        variableAmount_1: "",
        amountEarlier_1: "",
        timeEarlier_1: "",
        dateEarlier_1: "",
        amountLater_1: "",
        timeLater_1: "",
        dateLater_1: "",
        maxAmount_1: "",
        maxTime_1: "",
        verticalPixels_1: "",
        horizontalPixels_1: "",
        leftMarginWidthIn_1: "",
        bottomMarginHeightIn_1: "",
        graphWidthIn_1: "",
        graphHeightIn_1: "",
        widthIn_1: "",
        heightIn_1: "",
        showMinorTicks_1: "",
        choice_1: "",
        dragAmount_1: "",
        shownTimestamp_1: "",
        choiceTimestamp_1: "",
        highup_1: "",
        lowdown_1: "",
        choiceTimeSec_1: "",
        position_2: "",
        viewType_2: "",
        interaction_2: "",
        variableAmount_2: "",
        amountEarlier_2: "",
        timeEarlier_2: "",
        dateEarlier_2: "",
        amountLater_2: "",
        timeLater_2: "",
        dateLater_2: "",
        maxAmount_2: "",
        maxTime_2: "",
        verticalPixels_2: "",
        horizontalPixels_2: "",
        leftMarginWidthIn_2: "",
        bottomMarginHeightIn_2: "",
        graphWidthIn_2: "",
        graphHeightIn_2: "",
        widthIn_2: "",
        heightIn_2: "",
        showMinorTicks_2: "",
        choice_2: "",
        dragAmount_2: "",
        shownTimestamp_2: "",
        choiceTimestamp_2: "",
        highup_2: "",
        lowdown_2: "",
        choiceTimeSec_2: "",
        position_3: "",
        viewType_3: "",
        interaction_3: "",
        variableAmount_3: "",
        amountEarlier_3: "",
        timeEarlier_3: "",
        dateEarlier_3: "",
        amountLater_3: "",
        timeLater_3: "",
        dateLater_3: "",
        maxAmount_3: "",
        maxTime_3: "",
        verticalPixels_3: "",
        horizontalPixels_3: "",
        leftMarginWidthIn_3: "",
        bottomMarginHeightIn_3: "",
        graphWidthIn_3: "",
        graphHeightIn_3: "",
        widthIn_3: "",
        heightIn_3: "",
        showMinorTicks_3: "",
        choice_3: "",
        dragAmount_3: "",
        shownTimestamp_3: "",
        choiceTimestamp_3: "",
        highup_3: "",
        lowdown_3: "",
        choiceTimeSec_3: "",
        position_4: "",
        viewType_4: "",
        interaction_4: "",
        variableAmount_4: "",
        amountEarlier_4: "",
        timeEarlier_4: "",
        dateEarlier_4: "",
        amountLater_4: "",
        timeLater_4: "",
        dateLater_4: "",
        maxAmount_4: "",
        maxTime_4: "",
        verticalPixels_4: "",
        horizontalPixels_4: "",
        leftMarginWidthIn_4: "",
        bottomMarginHeightIn_4: "",
        graphWidthIn_4: "",
        graphHeightIn_4: "",
        widthIn_4: "",
        heightIn_4: "",
        showMinorTicks_4: "",
        choice_4: "",
        dragAmount_4: "",
        shownTimestamp_4: "",
        choiceTimestamp_4: "",
        highup_4: "",
        lowdown_4: "",
        choiceTimeSec_4: "",
        position_5: "",
        viewType_5: "",
        interaction_5: "",
        variableAmount_5: "",
        amountEarlier_5: "",
        timeEarlier_5: "",
        dateEarlier_5: "",
        amountLater_5: "",
        timeLater_5: "",
        dateLater_5: "",
        maxAmount_5: "",
        maxTime_5: "",
        verticalPixels_5: "",
        horizontalPixels_5: "",
        leftMarginWidthIn_5: "",
        bottomMarginHeightIn_5: "",
        graphWidthIn_5: "",
        graphHeightIn_5: "",
        widthIn_5: "",
        heightIn_5: "",
        showMinorTicks_5: "",
        choice_5: "",
        dragAmount_5: "",
        shownTimestamp_5: "",
        choiceTimestamp_5: "",
        highup_5: "",
        lowdown_5: "",
        choiceTimeSec_5: "",
        position_6: "",
        viewType_6: "",
        interaction_6: "",
        variableAmount_6: "",
        amountEarlier_6: "",
        timeEarlier_6: "",
        dateEarlier_6: "",
        amountLater_6: "",
        timeLater_6: "",
        dateLater_6: "",
        maxAmount_6: "",
        maxTime_6: "",
        verticalPixels_6: "",
        horizontalPixels_6: "",
        leftMarginWidthIn_6: "",
        bottomMarginHeightIn_6: "",
        graphWidthIn_6: "",
        graphHeightIn_6: "",
        widthIn_6: "",
        heightIn_6: "",
        showMinorTicks_6: "",
        choice_6: "",
        dragAmount_6: "",
        shownTimestamp_6: "",
        choiceTimestamp_6: "",
        highup_6: "",
        lowdown_6: "",
        choiceTimeSec_6: "",
        position_7: "",
        viewType_7: "",
        interaction_7: "",
        variableAmount_7: "",
        amountEarlier_7: "",
        timeEarlier_7: "",
        dateEarlier_7: "",
        amountLater_7: "",
        timeLater_7: "",
        dateLater_7: "",
        maxAmount_7: "",
        maxTime_7: "",
        verticalPixels_7: "",
        horizontalPixels_7: "",
        leftMarginWidthIn_7: "",
        bottomMarginHeightIn_7: "",
        graphWidthIn_7: "",
        graphHeightIn_7: "",
        widthIn_7: "",
        heightIn_7: "",
        showMinorTicks_7: "",
        choice_7: "",
        dragAmount_7: "",
        shownTimestamp_7: "",
        choiceTimestamp_7: "",
        highup_7: "",
        lowdown_7: "",
        choiceTimeSec_7: "",
        position_8: "",
        viewType_8: "",
        interaction_8: "",
        variableAmount_8: "",
        amountEarlier_8: "",
        timeEarlier_8: "",
        dateEarlier_8: "",
        amountLater_8: "",
        timeLater_8: "",
        dateLater_8: "",
        maxAmount_8: "",
        maxTime_8: "",
        verticalPixels_8: "",
        horizontalPixels_8: "",
        leftMarginWidthIn_8: "",
        bottomMarginHeightIn_8: "",
        graphWidthIn_8: "",
        graphHeightIn_8: "",
        widthIn_8: "",
        heightIn_8: "",
        showMinorTicks_8: "",
        choice_8: "",
        dragAmount_8: "",
        shownTimestamp_8: "",
        choiceTimestamp_8: "",
        highup_8: "",
        lowdown_8: "",
        choiceTimeSec_8: "",
        experience_survey_enjoy: "",
        experience_survey_clear: "",
        experience_survey_understand: "",
        experience_survey_present: "",
        experience_survey_imagine: "",
        experience_survey_easy: "",
        experience_survey_format: "",
        financial_lit_survey_numeracy: "",
        financial_lit_survey_inflation: "",
        financial_lit_survey_risk: "",
        purpose_survey_differnce: "",
        purpose_survey_better: "",
        purpose_survey_serve: "",
        purpose_survey_truly: "",
        purpose_survey_describe: "",
        purpose_survey_effort: "",
        feedback: "",
      });
      expect(key).toBe("1");
    });
  });
});
