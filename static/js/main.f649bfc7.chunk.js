(this.webpackJsonpvizsurvey=this.webpackJsonpvizsurvey||[]).push([[0],{117:function(t){t.exports=JSON.parse('{"a":"1.0.0"}')},231:function(t,e){},232:function(t,e,n){},233:function(t,e,n){},241:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(36),s=n.n(r),o=n(18),c=n(49),u=n(1),l=n.n(u),d=n(4),h=n(20),b=n(120),m=n(88),j=atob("Z2hwX2RsSG54M3JkNHB2Z0puQmp2OUdiYzJVdkFzNDRzbTBJMlVGTQo="),f="d2d5617ce3c6b4436ec781854ba10341",p="Unitialized",g="Earlier",x="Later",O="Unitialized",v="Fetching",y="Fetched",_="Complete",w="Error",q=Object(c.b)("survey/getQuestions",function(){var t=Object(d.a)(l.a.mark((function t(e){var n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=+e,t.next=3,Object(h.c)("https://gist.githubusercontent.com/pcordone/f8095509f669e2a3ac98bbfa586d16d9/raw/");case 3:return(n=t.sent).forEach((function(t){t.question_set_id=+t.question_set_id,t.position=+t.position,t.amount_earlier=+t.amount_earlier,t.time_earlier=+t.time_earlier,t.amount_later=+t.amount_later,t.time_later=+t.time_later,t.choice=p,t.answer_time=void 0,t.participant_id=void 0})),i=n.filter((function(t){return t.question_set_id===e})),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),S=Object(c.b)("survey/writeAnswers",function(){var t=Object(d.a)(l.a.mark((function t(e,n){var i,a,r,s,o,c,u,d,h,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.getState,a=i(),r=new b.a({userAgent:"thesis_answers/v1.0",auth:j}),s="PATCH /gists/".concat(f),o=m.DateTime.now().toFormat("yyyy-MM-dd-H-mm-ss-SSS-ZZZZ"),c={},e="".concat(e),c["answers-subject-".concat(a.questions.participant_id,"-").concat(o,".csv")]={content:e},u="Answer results for participant ".concat(a.questions.participant_id," at ").concat(o),console.log("submitting answers for "+u),d={gist_id:f,description:u,files:c},t.next=13,r.request(s,d);case 13:h=t.sent,p=h.status,console.log("answers submitted with status of "+p);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),k=Object(c.c)({name:"questions",initialState:{questions:[],currentQuestion:0,question_set_id:null,participant_id:null,status:"Unitialized",error:null},reducers:{setParticipant:function(t,e){null===t.participant_id&&null!==e.payload&&(t.participant_id=e.payload)},setQuestionSet:function(t,e){null===t.questionSetId&&null!==e.payload&&(t.question_set_id=e.payload)},answer:function(t,e){t.questions[t.currentQuestion].choice=e.payload,t.questions[t.currentQuestion].answer_time=m.DateTime.now().toFormat("MM/dd/yyyy H:mm:ss:SSS ZZZZ"),t.questions[t.currentQuestion].participant_id=t.participant_id,t.currentQuestion===t.questions.length-1?t.status=_:t.currentQuestion+=1},nextQuestion:function(t,e){t.questions.currentQuestion+=t.currentQuestion<t.questions.length?1:0},previousQuestion:function(t,e){t.currentQuestion-=t.currentQuestion>0?1:0}},extraReducers:function(t){t.addCase(q.pending,(function(t,e){t.status===O&&(t.status=v)})).addCase(q.fulfilled,(function(t,e){t.questions=e.payload,t.currentQuestion=0,t.status=y})).addCase(q.rejected,(function(t,e){t.status===y&&(t.status=w,t.error=e.error)}))}}),I=function(t){return Object(h.e)(t.questions.questions,(function(t){return t.time_later}))},Q=function(t){return t.questions.questions},z=function(t){return t.questions.questions[t.questions.currentQuestion]},T=function(t){return t.questions.status},F=k.actions,N=F.answer,R=(F.nextQuestion,F.previousQuestion,F.setParticipant),A=F.setQuestionSet,Z=k.reducer,C=Object(c.a)({reducer:{questions:Z}}),P=(n(232),n(48)),E=n(10),M=n(249),D=n(250),L=(n(233),n(246)),V=n(247),B=n(248),J=n(50),U=n(245),H=n(2);var G=function(){var t=Object(o.b)(),e=Object(o.c)(z),n=Object(o.c)(T);function i(){return"$".concat(e.amount_earlier," ").concat(0===(t=e.time_earlier)?"today":"in ".concat(t," weeks"));var t}function a(){return"$".concat(e.amount_later," in ").concat(e.time_later," weeks")}var r=Object(H.jsx)(J.d,{initialValues:{choice:p},validate:function(t){var e={};return t.choice&&t.choice!==p||(e.choice="Please choose a selection to continue."),e},onSubmit:function(e,n){var i=n.setSubmitting,a=n.resetForm;setTimeout((function(){t(N(e.choice)),i(!1),a()}),400)},children:function(t){var e=t.isSubmitting;return Object(H.jsxs)(J.c,{children:[Object(H.jsxs)("div",{role:"group","aria-labelledby":"my-radio-group",className:"radio-choice-label",children:[Object(H.jsx)("h3",{children:"".concat(i()," vs. ").concat(a())}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{children:[Object(H.jsx)(J.b,{type:"radio",name:"choice",value:g}),"\xa0",i()]}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{children:[Object(H.jsx)(J.b,{type:"radio",name:"choice",value:x}),"\xa0",a()]}),Object(H.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:Object(H.jsx)(J.a,{name:"choice",component:"div"})})]}),Object(H.jsx)(U.a,{type:"submit",disabled:e,children:"Submit"})]})}});return n===_?Object(H.jsx)(E.a,{to:"/thankyou"}):r},$=function(t,e){var n=a.a.useRef();return a.a.useEffect((function(){return t(h.i(n.current)),function(){}}),e),n};var Y=function(t){var e=Object(o.c)(z),n=Object(o.c)(I),i=t.height,a=t.width,r={top:t.top_margin,right:t.right_margin,bottom:t.bottom_margin,left:t.left_margin},s={height:i,width:a,marginLeft:r.left+"px",marginRight:r.right+"px"},c=Array.from(Array(n+1).keys()),u=c.map((function(t){return t==e.time_earlier?{time:t,amount:e.amount_earlier}:t==e.time_later?{time:t,amount:e.amount_later}:{time:t,amount:0}}));return Object(H.jsxs)("svg",{width:a,height:i,ref:$((function(t){var e=Object(h.g)().domain(c).rangeRound([r.left,a-r.right]).padding(.1),n=[0,Object(h.e)(u,(function(t){return t.amount}))],s=Object(h.h)().domain(n).rangeRound([i-r.bottom,r.top]);t.select(".x-axis").attr("transform","translate(0,".concat(i-r.bottom,")")).call(Object(h.a)(e).tickValues(c).tickSizeOuter(0));var o=Object(h.f)(n[0],n[1],n[1]/5);t.select(".y-axis").attr("transform","translate(".concat(r.left,",0)")).style("color","steelblue").call(Object(h.b)(s).tickValues(o).tickFormat(h.d("$,.2f"))).call((function(t){return t.select(".domain").remove()})),t.select(".plot-area").attr("fill","steelblue").attr("class","plot-area").selectAll(".bar").data(u).join("rect").attr("class","bar").attr("x",(function(t){return e(t.time)})).attr("width",e.bandwidth()).attr("y",(function(t){return s(t.amount)})).attr("height",(function(t){return s(0)-s(t.amount)}))}),[u]),style:s,children:[Object(H.jsx)("g",{className:"plot-area"}),Object(H.jsx)("g",{className:"x-axis"}),Object(H.jsx)("g",{className:"y-axis"})]})};var W=function(){return Object(H.jsxs)(L.a,{fluid:!0,children:[Object(H.jsx)(V.a,{children:Object(H.jsx)(B.a,{children:Object(H.jsx)(G,{})})}),Object(H.jsx)(V.a,{children:Object(H.jsx)(B.a,{children:Object(H.jsx)(Y,{width:"600",height:"600",top_margin:"20",right_margin:"30",bottom_margin:"30",left_margin:"80"})})})]})},X=n(116),K=n.n(X);function tt(){var t=Object(o.b)(),e=Object(o.c)(T),n=Object(E.g)().search,a=new URLSearchParams(n).get("participant_id"),r=new URLSearchParams(n).get("question_set_id");return t(R(a)),t(A(r)),Object(i.useEffect)((function(){e===O&&t(q(r))}),[e,t]),Object(H.jsx)("div",{children:e===v&&Object(H.jsx)(K.a,{type:"spinningBubbles",color:"#444"})})}var et=n(117),nt=function(){return Object(H.jsx)("div",{className:"footer",children:Object(H.jsxs)("p",{children:["Version: ",et.a]})})},it=function(){return Object(H.jsx)("div",{children:Object(H.jsx)(P.a,{children:Object(H.jsxs)("div",{className:"App",children:[Object(H.jsxs)(M.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(H.jsx)(M.a.Brand,{as:P.b,to:"/",children:"Viz Survey"}),Object(H.jsx)(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(H.jsx)(M.a.Collapse,{id:"basic-navbar-nav",children:Object(H.jsx)(D.a,{className:"mr-auto",children:Object(H.jsx)(D.a.Item,{href:"/survey",children:Object(H.jsx)(D.a.Link,{as:P.b,to:"/survey",children:"Survey"})})})})]}),Object(H.jsx)(tt,{}),Object(H.jsxs)(E.d,{children:[Object(H.jsx)(E.b,{exact:!0,path:"/",component:at}),Object(H.jsx)(E.b,{path:"/survey",component:W}),Object(H.jsx)(E.b,{path:"/thankyou",component:rt}),Object(H.jsx)(E.b,{path:"/*",component:at})]}),Object(H.jsx)(nt,{className:"footer bg-dark"})]})})})},at=function(){return Object(H.jsxs)("div",{id:"home-text",children:[Object(H.jsx)("p",{children:"*** TODO: Inert the survey instructions for the subject here ***"}),".",Object(H.jsx)("p",{children:"*** TODO: Remove these notes below. They are here during development only. ***"}),"Some open questions about how to design the visualization are captured below. I didn't want to loose track of them, so I put them on this page. I also have a list of tasks to still do. For information on how the app is designed and works, see"," ",Object(H.jsx)("a",{href:" https://github.com/pcordone/vizsurvey",children:"Github README.md"}),".",Object(H.jsxs)("ol",{children:[Object(H.jsxs)("li",{children:["Should the time scale be fixed for the question set or not? ",Object(H.jsx)("br",{}),"Right now, I fixed the time scale across the questions to be from 0 to the maximum time for the question set. I thought visually it stopped the bar chart from jumping around between the questions and the range of time values is not so large that it causes any of the charts to become too small along the x axis to render well; however from an experimental point of view, I am not sure if it will bias the subject in some way and I am not sure this is the best choice. It would be easy to drive this as a parameter from the input data for each experiment to turn it on and off so that the time scale could be set to be consistent across the questions or let it format uniquely for each question."]}),Object(H.jsx)("li",{children:"Should the y scale range be fixed for the question set? I did not fix the y range to the same scale between questions since the variation in the amount values is larger and the chart bars with smaller amounts would be too compressed in the y axis too small to be meaninful. I did fix the number of ticks for the y scale to be the same across questions in the set since visually it seems easier to comprehend between quesitons; however I need to fix the algorithm since it ends up with strange interval values if the largest amount in the qustion set is not a divided by 5 to a normal looking v alue. Not sure if that is a good decision. Again, this would be easy to paramaterize through the input data."}),Object(H.jsx)("li",{children:"I need to get the vertical line to draw for the y axis."}),Object(H.jsx)("li",{children:"I need to get the survey results to save on either gist or a google sheets document may be better since I can't append to a gist file through the API. I may create a new gist file for each survey results."})]})]})};var rt=function(){var t=Object(o.b)(),e=function(t){var e=t.map((function(t){return"".concat(t.question_set_id,", ").concat(t.position,", ").concat(t.amount_earlier,", ").concat(t.time_earlier,", ").concat(t.amount_later,", ").concat(t.time_later,", ").concat(t.choice,", ").concat(t.answer_time,", ").concat(t.participant_id)}));return["question_set_id,position,amount_earlier,time_earlier,amount_later,time_later,choice,answer_time,participant_id"].concat(e).join("\n")}(Object(o.c)(Q));return console.log(e),t(S(e)),Object(H.jsxs)("div",{children:[Object(H.jsx)("p",{children:"Your answers have been submitted. Thank you for taking this survey!"}),"."]})},st=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,251)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),i(t),a(t),r(t),s(t)}))};s.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(o.a,{store:C,children:Object(H.jsx)(it,{})})}),document.getElementById("root")),st()}},[[241,1,2]]]);
//# sourceMappingURL=main.f649bfc7.chunk.js.map