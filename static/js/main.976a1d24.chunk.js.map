{"version":3,"sources":["features/ViewType.js","features/VariableType.js","features/InteractionType.js","features/Question.js","features/FileIOAdapter.js","features/treatments.js","features/StatusType.js","features/ChoiceType.js","features/Answer.js","features/questionSlice.js","features/QuestionEngine.js","app/store.js","components/MELForm.js","hooks/useD3.js","components/BarChart.js","components/Calendar.js","components/Survey.js","components/QueryParam.js","App.js","reportWebVitals.js","index.js"],"names":["ViewType","Enumify","word","barchart","calendar","_","closeEnum","VariableType","none","earlierAmount","laterAmount","InteractionType","drag","titration","Question","treatmentId","position","viewType","interaction","variableAmount","amountEarlier","timeEarlier","dateEarlier","amountLater","timeLater","dateLater","maxAmount","maxTime","horizontalPixels","verticalPixels","leftMarginWidthIn","bottomMarginHeightIn","graphWidthIn","graphHeightIn","width","height","comment","this","highup","lowdown","FileIOAdapter","fetchQuestions","csvParse","e","row","treatment_id","enumValueOf","view_type","variable_amount","amount_earlier","time_earlier","undefined","date_earlier","Date","amount_later","time_later","date_later","max_amount","max_time","horizontal_pixels","vertical_pixels","left_margin_width_in","bottom_margin_height_in","graph_width_in","graph_height_in","filter","d","writeAnswers","answersCSV","a","getState","state","console","log","JSON","stringify","answers","rows","map","choice","shownTimestamp","choiceTimestamp","participantCode","concat","join","StatusType","ChoiceType","Answer","qe","questions","currentQuestionIdx","treatment","currentTreatment","latestAnswer","length","answer","id","push","createNextAnswer","action","payload","isLastTreatment","status","currentTreatmentAndLatestAnswer","possibleHighup","possibleLowdown","assert","titratingAmount","override","titrationAmount","adjustmentAmount","parseInt","toFormat","incNextQuestion","calcTitrationAmount","updateHighupOrLowdown","newAmount","calcNewAmount","io","createAsyncThunk","questionSlice","createSlice","name","initialState","participantId","error","reducers","setParticipant","setTreatmentId","startSurvey","setQuestionShownTimestamp","setLatestAnswerShown","answerCurrentQuestion","selectAllQuestions","allQuestions","fetchCurrentTreatment","selectCurrentQuestion","fetchStatus","fetchTreatmentId","actions","store","configureStore","reducer","questionReducer","middleware","getDefaultMiddleware","MELForm","dispatch","useDispatch","q","useSelector","question1stPartText","sooner_time","result","initialValues","validate","values","errors","onSubmit","setSubmitting","resetForm","setTimeout","DateTime","now","isSubmitting","role","className","type","value","style","color","fontWeight","component","Button","disabled","to","useD3","renderChartFn","dependencies","ref","React","useRef","useEffect","d3","current","BarChart","ppi","window","devicePixelRatio","totalWidthIn","totalHeightIn","Array","from","keys","time","amount","viewBox","preserveAspectRatio","flexGrow","minWidth","x","y","stroke","fill","strokeWidth","calendarMatrix","require","Calendar","props","question","margin","top","top_margin","right","right_margin","bottom","bottom_margin","left","left_margin","marginLeft","marginRight","table","monthDays","monthName","getMonth","html","select","data","text","selectAll","earlierDay","getDate","laterDay","attr","Survey","Container","fluid","Row","Col","QueryParam","search","useLocation","URLSearchParams","get","App","exact","path","Home","Instructions","ThankYou","href","handle","useFullScreenHandle","size","onClick","enter","uuid","uuidv4","csv","convertToCSV","exit","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","enableAllPlugins","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.976a1d24.chunk.js","sourcesContent":["import { Enumify } from \"enumify\";\n\nexport class ViewType extends Enumify {\n  static word = new ViewType();\n  static barchart = new ViewType();\n  static calendar = new ViewType();\n  static _ = this.closeEnum();\n}\n","import { Enumify } from \"enumify\";\n\nexport class VariableType extends Enumify {\n  static none = new VariableType();\n  static earlierAmount = new VariableType();\n  static laterAmount = new VariableType();\n  static _ = this.closeEnum();\n}\n","import { Enumify } from \"enumify\";\n\nexport class InteractionType extends Enumify {\n  static none = new InteractionType();\n  static drag = new InteractionType();\n  static titration = new InteractionType();\n  static _ = this.closeEnum();\n}\n","import { ViewType } from \"./ViewType\";\nimport { VariableType } from \"./VariableType\";\nimport { InteractionType } from \"./InteractionType\";\n\nexport class Question {\n  constructor({\n    treatmentId,\n    position,\n    viewType,\n    interaction,\n    variableAmount,\n    amountEarlier,\n    timeEarlier,\n    dateEarlier,\n    amountLater,\n    timeLater,\n    dateLater,\n    maxAmount,\n    maxTime,\n    horizontalPixels,\n    verticalPixels,\n    leftMarginWidthIn,\n    bottomMarginHeightIn,\n    graphWidthIn,\n    graphHeightIn,\n    width,\n    height,\n    comment,\n  }) {\n    this.treatmentId = treatmentId;\n    this.position = position;\n    this.viewType = viewType;\n    this.interaction = interaction;\n    this.variableAmount = variableAmount;\n    this.amountEarlier = amountEarlier;\n    this.timeEarlier = timeEarlier;\n    this.dateEarlier = dateEarlier;\n    this.amountLater = amountLater;\n    this.timeLater = timeLater;\n    this.dateLater = dateLater;\n    this.maxAmount = maxAmount;\n    this.maxTime = maxTime;\n    this.horizontalPixels = horizontalPixels;\n    this.verticalPixels = verticalPixels;\n    this.leftMarginWidthIn = leftMarginWidthIn;\n    this.bottomMarginHeightIn = bottomMarginHeightIn;\n    this.graphWidthIn = graphWidthIn;\n    this.graphHeightIn = graphHeightIn;\n    this.width = width;\n    this.height = height;\n    this.comment = comment;\n    this.highup = null;\n    this.lowdown = null;\n  }\n}\n\nexport function fromCSVRow(row) {\n  return new Question({\n    treatmentId: +row.treatment_id,\n    position: +row.position,\n    viewType: ViewType.enumValueOf(row.view_type),\n    interaction: InteractionType.enumValueOf(row.interaction),\n    variableAmount: VariableType.enumValueOf(row.variable_amount),\n    amountEarlier: +row.amount_earlier,\n    timeEarlier: row.time_earlier ? +row.time_earlier : undefined,\n    dateEarlier: row.date_earlier ? new Date(row.date_earlier) : undefined,\n    amountLater: +row.amount_later,\n    timeLater: row.time_later ? +row.time_later : undefined,\n    dateLater: row.date_later ? new Date(row.date_later) : undefined,\n    maxAmount: +row.max_amount,\n    maxTime: +row.max_time,\n    horizontalPixels: +row.horizontal_pixels,\n    verticalPixels: +row.vertical_pixels,\n    leftMarginWidthIn: +row.left_margin_width_in,\n    bottomMarginHeightIn: +row.bottom_margin_height_in,\n    graphWidthIn: +row.graph_width_in,\n    graphHeightIn: +row.graph_height_in,\n    width: +row.width,\n    height: +row.height,\n    comment: row.comment,\n  });\n}\n","import { csvParse } from \"d3\";\n// import { Octokit } from \"octokit\";\n// import { DateTime } from \"luxon\";\nimport { TREATMENTS_CSV } from \"./treatments\";\nimport { fromCSVRow } from \"./Question\";\n\nexport class FileIOAdapter {\n  constructor() {}\n\n  fetchQuestions = (treatmentId) => {\n    treatmentId = +treatmentId;\n    const questions = csvParse(TREATMENTS_CSV, (e) => {\n      return fromCSVRow(e);\n    }).filter((d) => d.treatmentId === treatmentId);\n    return questions;\n  };\n\n  convertToCSV(answers) {\n    const header = [\n      \"treatment_id,position,view_type,interaction,amount_earlier,time_earlier,date_earlier,amount_later,time_later,date_later,max_amount,max_time,vertical_pixels,horizontal_pixels,left_margin_width_in,bottom_margin_height_in,graph_width_in,graph_height_in,choice,shown_timestamp,choice_timestamp,highup,lowdown,participant_code\",\n    ];\n    const rows = answers.map(\n      (a) =>\n        `${a.treatmentId}, ${a.position}, ${a.viewType}, ${a.interaction}, ${a.amountEarlier}, ${a.timeEarlier}, ${a.dateEarlier}, ${a.amountLater}, ${a.timeLater}, ${a.dateLater}, ${a.maxAmount}, ${a.maxTime}, ${a.verticalPixels}, ${a.horizontalPixels}, ${a.leftMarginWidthIn}, ${a.bottomMarginHeightIn}, ${a.graphWidthIn}, ${a.graphHeightIn}, ${a.choice}, ${a.shownTimestamp}, ${a.choiceTimestamp}, ${a.highup}, ${a.lowdown}, ${a.participantCode}`\n    );\n    return header.concat(rows).join(\"\\n\");\n  }\n\n  writeAnswers = async (answersCSV, { getState }) => {\n    const state = getState();\n    console.log(answersCSV);\n    console.log(JSON.stringify(state));\n    // const octokit = new Octokit({\n    //   userAgent: \"thesis_answers/v1.0\",\n    //   // eslint-disable-next-line no-undef\n    //   auth: atob(process.env.REACT_APP_AUTH_TOKEN),\n    // });\n    // // eslint-disable-next-line no-undef\n    // const gistAnswerId = process.env.REACT_APP_GIST_ANSWER_ID;\n    // const url = `PATCH /gists/${gistAnswerId}`;\n    // const now = DateTime.now().toFormat(\"yyyy-MM-dd-H-mm-ss-SSS-ZZZZ\");\n    // const files = {};\n    // answersCSV = `${answersCSV}`;\n    // files[`answers-subject-${state.questions.participant_id}-${now}.csv`] = {\n    //   content: answersCSV,\n    // };\n    // const description = `Answer results for participant ${state.questions.participant_id} at ${now}`;\n    // console.log(\"submitting answers for \" + description);\n    // const payloadObj = {\n    //   gist_id: gistAnswerId,\n    //   description: description,\n    //   files: files,\n    // };\n    // const response = await octokit.request(url, payloadObj);\n\n    // const status = response.status;\n    // console.log(\"answers submitted with status of \" + status);\n  };\n}\n","export const TREATMENTS_CSV = `treatment_id,position,view_type,interaction,variable_amount,amount_earlier,time_earlier,date_earlier,amount_later,time_later,date_later,max_amount,max_time,horizontal_pixels,vertical_pixels,left_margin_width_in,bottom_margin_height_in,graph_width_in,graph_height_in,width_in,height_in,comment\n1,1,word,none,none,500,2,,1000,3,,,10,,,,,,,,,\"Read 2001 example, absolute size\"\n2,1,barchart,none,none,500,2,,1000,3,,1000,10,100,100,0.5,0.5,6,6,6.5,6.5,\"Read 2001 example, absolute size\"\n3,1,barchart,drag,laterAmount,500,2,,1000,10,,1500,10,100,100,0.5,0.5,6,6,6.5,6.5,\"Read 2001 example, absolute size\"\n4,1,word,titration,laterAmount,500,2,,1000,3,,,10,,,,,,,,,\"Read 2001 example, absolute size\"\n5,1,barchart,titration,laterAmount,500,2,,1000,10,,1500,10,100,100,0.5,0.5,3,3,3.5,3.5,\"Read 2001 example, absolute size\"\n`;\n","export const StatusType = {\n  Unitialized: \"Unitialized\",\n  Fetching: \"Fetching\",\n  Fetched: \"Fetched\",\n  Complete: \"Complete\",\n  Error: \"Error\",\n};\n","export const ChoiceType = {\n  unitialized: \"unitialized\",\n  earlier: \"earlier\",\n  later: \"later\",\n};\n","export class Answer {\n  constructor({\n    treatmentId: treatmentId,\n    position: position,\n    viewType: viewType,\n    interaction: interaction,\n    amountEarlier: amountEarlier,\n    timeEarlier: timeEarlier,\n    dateEarlier: dateEarlier,\n    amountLater: amountLater,\n    timeLater: timeLater,\n    dateLater: dateLater,\n    maxAmount: maxAmount,\n    maxTime: maxTime,\n    verticalPixels: verticalPixels,\n    horizontalPixels: horizontalPixels,\n    leftMarginWidthIn: leftMarginWidthIn,\n    bottomMarginHeightIn: bottomMarginHeightIn,\n    graphWidthIn: graphWidthIn,\n    graphHeightIn: graphHeightIn,\n    choice: choice,\n    shownTimestamp: shownTimestamp,\n    choiceTimestamp: choiceTimestamp,\n    highup: highup,\n    lowdown: lowdown,\n    participantCode: participantCode,\n  }) {\n    this.treatmentId = treatmentId;\n    this.position = position;\n    this.viewType = viewType;\n    this.interaction = interaction;\n    this.amountEarlier = amountEarlier;\n    this.timeEarlier = timeEarlier;\n    this.dateEarlier = dateEarlier;\n    this.amountLater = amountLater;\n    this.timeLater = timeLater;\n    this.dateLater = dateLater;\n    this.maxAmount = maxAmount;\n    this.maxTime = maxTime;\n    this.verticalPixels = verticalPixels;\n    this.horizontalPixels = horizontalPixels;\n    this.leftMarginWidthIn = leftMarginWidthIn;\n    this.bottomMarginHeightIn = bottomMarginHeightIn;\n    this.graphWidthIn = graphWidthIn;\n    this.graphHeightIn = graphHeightIn;\n    this.choice = choice;\n    this.shownTimestamp = shownTimestamp;\n    this.choiceTimestamp = choiceTimestamp;\n    this.highup = highup;\n    this.lowdown = lowdown;\n    this.participantCode = participantCode;\n  }\n}\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { FileIOAdapter } from \"./FileIOAdapter\";\nimport { QuestionEngine } from \"./QuestionEngine\";\nimport { StatusType } from \"./StatusType\";\n\n// Define the initial state of the store for this slicer.\nconst qe = new QuestionEngine();\nconst io = new FileIOAdapter();\n\nexport const writeAnswers = createAsyncThunk(\n  \"survey/writeAnswers\",\n  io.writeAnswers\n);\n\nexport const questionSlice = createSlice({\n  name: \"questions\", // I believe the global state is partitioned by the name value thus the terminology \"slice\"\n  initialState: {\n    treatmentId: null,\n    participantId: null,\n    questions: [],\n    answers: [],\n    currentQuestionIdx: 0,\n    highup: undefined,\n    lowdown: undefined,\n    status: StatusType.Unitialized,\n    error: null,\n  }, // the initial state of our global data (under name slice)\n  reducers: {\n    setParticipant(state, action) {\n      state.participantId = action.payload;\n      return state;\n    },\n    setTreatmentId(state, action) {\n      state.treatmentId = action.payload;\n      return state;\n    },\n    fetchQuestions(state) {\n      state.questions = io.fetchQuestions(state.treatmentId);\n      state.status = StatusType.Fetched;\n      return state;\n    },\n    startSurvey(state) {\n      qe.startSurvey(state);\n      return state;\n    },\n    setQuestionShownTimestamp(state, action) {\n      qe.setLatestAnswerShown(state, action);\n      return state;\n    },\n    // we define our actions on the slice of global store data here.\n    answer(state, action) {\n      qe.answerCurrentQuestion(state, action);\n    },\n  },\n});\n\nexport const selectAllQuestions = (state) => {\n  return qe.allQuestions(state.questions);\n};\n\nexport const fetchCurrentTreatment = (state) => {\n  const result = qe.currentTreatment(state.questions);\n  return result;\n};\n\nexport const selectCurrentQuestion = (state) => {\n  return qe.latestAnswer(state.questions);\n};\n\nexport const fetchStatus = (state) => {\n  return state.questions.status;\n};\n\nexport const fetchTreatmentId = (state) => {\n  return state.questions.treatmentId;\n};\n\n// Action creators are generated for each case reducer function\nexport const {\n  fetchQuestions,\n  startSurvey,\n  setQuestionShownTimestamp,\n  answer,\n  setParticipant,\n  setTreatmentId,\n} = questionSlice.actions;\n\nexport default questionSlice.reducer;\n","import { StatusType } from \"./StatusType\";\nimport { VariableType } from \"./VariableType\";\nimport { InteractionType } from \"./InteractionType\";\nimport { ChoiceType } from \"./ChoiceType\";\nimport { Answer } from \"./Answer\";\n\nexport const TIMESTAMP_FORMAT = \"MM/dd/yyyy H:mm:ss:SSS ZZZZ\";\n\n// TODO Need to capture errors in processing by settings state.status = StatusType.Error\nexport class QuestionEngine {\n  constructor() {}\n\n  currentTreatment(state) {\n    return state.questions[state.currentQuestionIdx];\n  }\n\n  currentTreatmentAndLatestAnswer(state) {\n    const treatment = this.currentTreatment(state);\n    const latestAnswer = this.latestAnswer(state);\n\n    return { treatment, latestAnswer };\n  }\n\n  latestAnswer(state) {\n    return state.answers.length === 0\n      ? null\n      : state.answers[state.answers.length - 1];\n  }\n\n  createNextAnswer(\n    treatment,\n    answers,\n    amountEarlier,\n    amountLater,\n    highup,\n    lowdown\n  ) {\n    const answer = new Answer({\n      treatmentId: treatment.id,\n      position: treatment.position,\n      viewType: treatment.viewType,\n      interaction: treatment.interaction,\n      amountEarlier: amountEarlier,\n      timeEarlier: treatment.timeEarlier,\n      dateEarlier: treatment.dateEarlier,\n      amountLater: amountLater,\n      timeLater: treatment.timeLater,\n      dateLater: treatment.dateLater,\n      maxAmount: treatment.maxAmount,\n      maxTime: treatment.maxTime,\n      verticalPixels: treatment.verticalPixels,\n      horizontalPixels: treatment.horizontalPixels,\n      leftMarginWidthIn: treatment.leftMarginWidthIn,\n      bottomMarginHeightIn: treatment.bottomMarginHeightIn,\n      graphWidthIn: treatment.graphWidthIn,\n      graphHeightIn: treatment.graphHeightIn,\n      choice: ChoiceType.unitialized,\n      highup: highup,\n      lowdown: lowdown,\n    });\n    answers.push(answer);\n  }\n\n  allQuestions(state) {\n    return state.answers;\n  }\n\n  startSurvey(state) {\n    state.currentQuestionIdx = 0;\n    const treatment = this.currentTreatment(state);\n    state.highup =\n      treatment.variableAmount === VariableType.laterAmount\n        ? treatment.amountEarlier\n        : treatment.amountLater;\n    state.lowdown = undefined;\n    this.createNextAnswer(\n      treatment,\n      state.answers,\n      treatment.amountEarlier,\n      treatment.amountLater,\n      state.highup,\n      state.lowdown\n    );\n  }\n\n  setLatestAnswerShown(state, action) {\n    this.latestAnswer(state).shownTimestamp = action.payload;\n  }\n\n  isLastTreatment(state) {\n    return state.currentQuestionIdx === state.questions.length - 1;\n  }\n\n  incNextQuestion(state) {\n    if (this.isLastTreatment(state)) {\n      state.status = StatusType.Complete;\n    } else {\n      state.currentQuestionIdx += 1;\n      const treatment = this.currentTreatment(state);\n      this.createNextAnswer(\n        treatment,\n        state.answers,\n        treatment.amountEarlier,\n        treatment.amountLater\n      );\n    }\n  }\n\n  updateHighupOrLowdown(state) {\n    const { treatment, latestAnswer } =\n      this.currentTreatmentAndLatestAnswer(state);\n    switch (latestAnswer.choice) {\n      case ChoiceType.earlier:\n        var possibleHighup =\n          treatment.variableAmount === VariableType.laterAmount\n            ? latestAnswer.amountLater\n            : latestAnswer.amountEarlier;\n        if (!state.highup || possibleHighup > state.highup)\n          state.highup = possibleHighup;\n        break;\n      case ChoiceType.later:\n        var possibleLowdown =\n          treatment.variableAmount === VariableType.laterAmount\n            ? latestAnswer.amountLater\n            : latestAnswer.amountEarlier;\n        if (!state.lowdown || possibleLowdown < state.lowdown)\n          state.lowdown = possibleLowdown;\n        break;\n      default:\n        console.assert(\n          true,\n          \"Invalid value for current answer in setAnswerCurrentQuestion\"\n        );\n        break;\n    }\n  }\n\n  calcTitrationAmount(titratingAmount, highup, override) {\n    return (override ? override : titratingAmount - highup) / 2;\n  }\n\n  calcNewAmount(state, titrationAmount) {\n    const { treatment, latestAnswer } =\n      this.currentTreatmentAndLatestAnswer(state);\n    var adjustmentAmount;\n    switch (treatment.variableAmount) {\n      case VariableType.laterAmount:\n        console.assert(\n          latestAnswer.choice && latestAnswer.choice !== ChoiceType.unitialized\n        );\n        adjustmentAmount =\n          latestAnswer.choice === ChoiceType.earlier\n            ? titrationAmount\n            : -1 * titrationAmount;\n        return (\n          parseInt((latestAnswer.amountLater + adjustmentAmount) / 10) * 10\n        );\n      case VariableType.earlierAmount:\n        adjustmentAmount =\n          latestAnswer.choice === ChoiceType.earlier\n            ? -1 * titrationAmount\n            : titrationAmount;\n        return (\n          parseInt((latestAnswer.amountEarlier + adjustmentAmount) / 10) * 10\n        );\n      default:\n        console.assert(\n          true,\n          \"Invalid value for question titration type in calcEarlierAndLaterAmounts\"\n        );\n        break;\n    }\n  }\n\n  answerCurrentQuestion(state, action) {\n    const { treatment, latestAnswer } =\n      this.currentTreatmentAndLatestAnswer(state);\n    latestAnswer.choice = action.payload.choice;\n    latestAnswer.choiceTimestamp =\n      action.payload.choiceTimestamp.toFormat(TIMESTAMP_FORMAT);\n    if (\n      treatment.interaction === InteractionType.none ||\n      treatment.interaction === InteractionType.drag\n    ) {\n      this.incNextQuestion(state);\n    } else if (treatment.interaction === InteractionType.titration) {\n      const titrationAmount = this.calcTitrationAmount(\n        treatment.variableAmount === VariableType.laterAmount\n          ? latestAnswer.amountLater\n          : latestAnswer.amountEarlier,\n        state.highup,\n        latestAnswer.length === 1 ? state.highup : null\n      );\n      this.updateHighupOrLowdown(state);\n      // TODO we need a termination condition for runaway titration\n      if (state.lowdown - state.highup <= 10) {\n        this.incNextQuestion(state);\n      } else {\n        const newAmount = this.calcNewAmount(state, titrationAmount);\n        if (treatment.variableAmount === VariableType.laterAmount) {\n          this.createNextAnswer(\n            treatment,\n            state.answers,\n            treatment.amountEarlier,\n            newAmount\n          );\n        } else if (treatment.variableAmount === VariableType.earlierAmount) {\n          this.createNextAnswer(\n            treatment,\n            state.answers,\n            newAmount,\n            treatment.amountLater\n          );\n        } else {\n          console.assert(\n            true,\n            \"Titration not set to amountEarlier or amountLater before calling answerCurrentQuestion\"\n          );\n        }\n      }\n    }\n  }\n}\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport questionReducer from \"../features/questionSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    questions: questionReducer,\n  },\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware(),\n});\n","import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { DateTime } from \"luxon\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport { Button } from \"react-bootstrap\";\nimport { ChoiceType } from \"../features/ChoiceType\";\nimport { StatusType } from \"../features/StatusType\";\nimport {\n  selectCurrentQuestion,\n  fetchStatus,\n  setQuestionShownTimestamp,\n  answer,\n} from \"../features/questionSlice\";\n\nexport function MELForm() {\n  const dispatch = useDispatch();\n  const q = useSelector(selectCurrentQuestion);\n  const status = useSelector(fetchStatus);\n\n  // Absolute money value, delay framing (e.g., $5 today vs. $5 plus an additional $5 in 4 weeks)\n  // Relative money value, delay framing (e.g., $5 today vs. $5 plus an additional 100% in 4 weeks)\n  // Standard MEL format (e.g., $5 today vs. $10 in 4 weeks)\n  // Relative money value, speedup framing (e.g., $10 in 4 weeks vs. $10 minus 50% today)\n  // Absolute money value, speedup framing (e.g., $10 in 4 weeks vs. $10 minus $5 today)\n\n  const todayText = (sooner_time) =>\n    sooner_time === 0 ? \"today\" : `in ${sooner_time} weeks`;\n\n  // function questionText() {\n  //   return `${question1stPartText()} vs. ${question2ndPartText()}`;\n  // }\n\n  function question1stPartText() {\n    return `$${q.amountEarlier} ${todayText(q.timeEarlier)}`;\n  }\n\n  function question2ndPartText() {\n    return `$${q.amountLater} in ${q.timeLater} weeks`;\n  }\n\n  const result = (\n    <Formik\n      initialValues={{ choice: ChoiceType.unitialized }}\n      validate={(values) => {\n        let errors = {};\n        if (!values.choice || values.choice === ChoiceType.unitialized) {\n          errors.choice = \"Please choose a selection to continue.\";\n        }\n        return errors;\n      }}\n      onSubmit={(values, { setSubmitting, resetForm }) => {\n        setTimeout(() => {\n          dispatch(\n            answer({\n              choice: values.choice,\n              choiceTimestamp: DateTime.now(),\n            })\n          );\n          setSubmitting(false);\n          resetForm();\n        }, 400);\n      }}\n    >\n      {({ isSubmitting }) => (\n        <Form>\n          <div\n            role=\"group\"\n            aria-labelledby=\"my-radio-group\"\n            className=\"radio-choice-label\"\n          >\n            <label>\n              <Field type=\"radio\" name=\"choice\" value={ChoiceType.earlier} />\n              &nbsp;{question1stPartText()}\n            </label>\n            <br></br>\n            <label>\n              <Field type=\"radio\" name=\"choice\" value={ChoiceType.later} />\n              &nbsp;{question2ndPartText()}\n            </label>\n            <span style={{ color: \"red\", fontWeight: \"bold\" }}>\n              <ErrorMessage name=\"choice\" component=\"div\" />\n            </span>\n          </div>\n          <Button type=\"submit\" disabled={isSubmitting}>\n            Submit\n          </Button>\n        </Form>\n      )}\n    </Formik>\n  );\n\n  if (status === StatusType.Complete) {\n    return <Redirect to=\"/thankyou\" />;\n  } else {\n    dispatch(setQuestionShownTimestamp(Date.now()));\n    return result;\n  }\n}\n\nexport default MELForm;\n","import React from \"react\";\nimport * as d3 from \"d3\";\n\nexport const useD3 = (renderChartFn, dependencies) => {\n  const ref = React.useRef();\n\n  React.useEffect(() => {\n    renderChartFn(d3.select(ref.current));\n    return () => {};\n  }, dependencies);\n\n  return ref;\n};\n","/* eslint-disable no-unused-vars */\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  axisBottom,\n  axisLeft,\n  scaleLinear,\n  range,\n  format,\n  drag,\n  select,\n} from \"d3\";\nimport { Formik, Form } from \"formik\";\nimport { Button } from \"react-bootstrap\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport { DateTime } from \"luxon\";\nimport { useD3 } from \"../hooks/useD3\";\nimport { ChoiceType } from \"../features/ChoiceType\";\nimport { StatusType } from \"../features/StatusType\";\nimport { InteractionType } from \"../features//InteractionType\";\nimport {\n  selectCurrentQuestion,\n  fetchStatus,\n  setQuestionShownTimestamp,\n  answer,\n} from \"../features/questionSlice\";\n\nfunction BarChart() {\n  const dispatch = useDispatch();\n  const q = useSelector(selectCurrentQuestion);\n  const status = useSelector(fetchStatus);\n\n  //macbook screen size 3072 × 1920\n\n  const ppi = window.devicePixelRatio >= 2 ? 132 : 96;\n  const totalWidthIn = q.leftMarginWidthIn + q.graphWidthIn;\n  const totalHeightIn = q.bottomMarginHeightIn + q.graphHeightIn;\n\n  const barWidth = 0.1 * ppi; // 0.1 in\n\n  const xTickValues = Array.from(Array(q.maxTime + 1).keys());\n  const data = xTickValues.map((d) => {\n    if (d === q.timeEarlier) {\n      return { time: d, amount: q.amountEarlier };\n    } else if (d === q.timeLater) {\n      return { time: d, amount: q.amountLater };\n    } else {\n      return { time: d, amount: 0 };\n    }\n  });\n\n  const result = (\n    // <Container fluid>\n    //   <Row>\n    //     <Col>\n    <svg\n      //         var innerHtml = `<svg viewBox=\"0 0 3.5 3.5\" width=\"462\" height=\"462\"  preserveAspectRatio=\"xMinYMin meet\">`;\n      id=\"test-svg\"\n      viewBox={`0 0 ${totalWidthIn} ${totalHeightIn}`}\n      width={`${totalWidthIn * ppi}`}\n      height={`${totalHeightIn * ppi}`}\n      preserveAspectRatio=\"xMinYMin meet\"\n      style={{ flexGrow: 0, minWidth: 0 }}\n      // ref={useD3(\n      //   (svg) => {\n      //     var chart = svg\n      //       .selectAll(\".plot-area\")\n      //       .data([null])\n      //       .join(\"g\")\n      //       .attr(\"class\", \"plot-area\")\n      //       .attr(\"transform\", `translate(${0},${0})`);\n\n      //     const x = scaleLinear()\n      //       .domain([0, q.maxTime])\n      //       .range([0, width]);\n\n      //     const yRange = [0, q.maxAmount];\n      //     const y = scaleLinear().domain(yRange).range([height, 0]);\n\n      //     chart\n      //       .selectAll(\".x-axis\")\n      //       .data([null])\n      //       .join(\"g\")\n      //       .attr(\"transform\", `translate(0,${height})`)\n      //       .attr(\"class\", \"x-axis\")\n      //       .call(\n      //         axisBottom(x)\n      //           .tickValues(xTickValues)\n      //           .tickFormat(format(\",.0f\"))\n      //       );\n\n      //     const yTickValues = range(yRange[0], yRange[1], yRange[1] / 5);\n      //     yTickValues.push(yRange[1]);\n\n      //     chart\n      //       .selectAll(\".y-axis\")\n      //       .data([null])\n      //       .join(\"g\")\n      //       .attr(\"class\", \"y-axis\")\n      //       //.attr(\"transform\", `translate(${margin.left},${margin.bottom})`)\n      //       .call(\n      //         //axisLeft(y).tickValues(yTickValues).tickFormat(d3.format(\"$,.2f\"))\n      //         axisLeft(y)\n      //           .tickValues(yTickValues)\n      //           .tickFormat(format(\"$,.0f\"))\n      //       );\n\n      //     // const yLabelG = svg\n      //     //   .select(\"#y-axis-label\")\n      //     //   .data([1])\n      //     //   .join(\"g\")\n      //     //   .attr(\"transform\", \"rotate(-90)\");\n\n      //     // .data(nullData)\n      //     // .join(\"text\")\n      //     // .attr(\"id\", \"y-axis-label\")\n      //     // .attr(\"text-anchor\", \"middle\")\n      //     // .attr(\"x\", -innerHeight / 2)\n      //     // .attr(\"y\", -margin.left)\n\n      //     // .text(\"Amount in USD\");\n\n      //     chart\n      //       .selectAll(\".bar\")\n      //       .data(data)\n      //       .join(\"rect\")\n      //       .attr(\"fill\", \"steelblue\")\n      //       .attr(\"class\", \"bar\")\n      //       .attr(\"x\", (d) => x(d.time) - barWidth / 2)\n      //       .attr(\"width\", barWidth)\n      //       .attr(\"y\", (d) => y(d.amount))\n      //       .attr(\"id\", (d) => {\n      //         return \"id\" + d.time;\n      //       })\n      //       .on(\"click\", (d) => {\n      //         if (q.interaction === InteractionType.titration) {\n      //           if (d.target.__data__.amount === q.amountEarlier) {\n      //             dispatch(\n      //               answer({\n      //                 choice: ChoiceType.earlier,\n      //                 choiceTimestamp: DateTime.now(),\n      //               })\n      //             );\n      //           } else {\n      //             dispatch(\n      //               answer({\n      //                 choice: ChoiceType.later,\n      //                 choiceTimestamp: DateTime.now(),\n      //               })\n      //             );\n      //           }\n      //         }\n      //       })\n      //       .attr(\"height\", (d) => y(0) - y(d.amount));\n      //     var dragHandler = drag().on(\"drag\", function (d) {\n      //       if (q.interaction === InteractionType.drag) {\n      //         select(this)\n      //           .attr(\"y\", d.y)\n      //           .attr(\"height\", y(0) - d.y);\n      //       }\n      //     });\n      //     dragHandler(chart.selectAll(\".bar\"));\n      //   },\n      //   [q]\n      // )}\n    >\n      <rect\n        x=\"0.5\"\n        y=\"0.5\"\n        width=\"3\"\n        height=\"3\"\n        style={{ stroke: \"black\", fill: \"none\", strokeWidth: \"0.05\" }}\n      />\n    </svg>\n    //     </Col>\n    //   </Row>\n    //   <Row>\n    //     <Col>\n    //       {q.interaction === InteractionType.drag ? (\n    //         <Formik\n    //           initialValues={{ choice: ChoiceType.Unitialized }}\n    //           validate={() => {\n    //             let errors = {};\n    //             return errors;\n    //           }}\n    //           onSubmit={(values, { setSubmitting, resetForm }) => {\n    //             console.log(\"submitting\");\n    //             setTimeout(() => {\n    //               dispatch(\n    //                 answer({\n    //                   choice: ChoiceType.earlier,\n    //                   choiceTimestamp: DateTime.now(),\n    //                 })\n    //               );\n    //               setSubmitting(false);\n    //               resetForm();\n    //             }, 400);\n    //           }}\n    //         >\n    //           {({ isSubmitting }) => (\n    //             <Form>\n    //               <Button type=\"submit\" disabled={isSubmitting}>\n    //                 Submit\n    //               </Button>\n    //             </Form>\n    //           )}\n    //         </Formik>\n    //       ) : (\n    //         \"\"\n    //       )}\n    //     </Col>\n    //   </Row>\n    // </Container>\n  );\n\n  if (status === StatusType.Complete) {\n    return <Redirect to=\"/thankyou\" />;\n  } else {\n    dispatch(setQuestionShownTimestamp(Date.now()));\n    return result;\n  }\n}\n\nexport default BarChart;\n","import React from \"react\";\n\nimport { useSelector } from \"react-redux\";\nimport { selectCurrentQuestion } from \"../features/questionSlice\";\n\nimport * as d3 from \"d3\";\nimport { useD3 } from \"../hooks/useD3\";\nvar calendarMatrix = require(\"calendar-matrix\");\n\nfunction Calendar(props) {\n  const question = useSelector(selectCurrentQuestion);\n\n  const height = question.question.verticalPixels;\n  const width = question.question.horizontalPixels;\n  const margin = {\n    top: props.top_margin,\n    right: props.right_margin,\n    bottom: props.bottom_margin,\n    left: props.left_margin,\n  };\n\n  const totalHeight = height + parseInt(margin.top) + parseInt(margin.bottom);\n  const totalWidth = width + parseInt(margin.left) + parseInt(margin.right);\n\n  const style = {\n    height: totalHeight,\n    width: totalWidth,\n    marginLeft: margin.left + \"px\",\n    marginRight: margin.right + \"px\",\n  };\n\n  //   const dateMonth = question.dateEarlier.getMonth();\n  //   const dateYear = question.dateEarlier.getFullYear();\n\n  return (\n    <table\n      id=\"calendar\"\n      ref={useD3((table) => {\n        const monthDays = calendarMatrix(question.question.dateEarlier);\n        const monthNames = [\n          \"January\",\n          \"February\",\n          \"March\",\n          \"April\",\n          \"May\",\n          \"June\",\n          \"July\",\n          \"August\",\n          \"September\",\n          \"October\",\n          \"November\",\n          \"December\",\n        ];\n        const month = question.question.dateEarlier.getMonth();\n        const monthName = monthNames[month];\n        table.html(\n          `<thead>\n                <tr>\n                    <td span='7'>\n                        <h2 id='currentMonth'></h2>\n                    </td>\n                </tr>\n                <tr>\n                    <td style='text-align: center;'>Sunday</td>\n                    <td style='text-align: center;'>Monday</td>\n                    <td style='text-align: center;'>Tuesday</td>\n                    <td style='text-align: center;'>Wednesday</td>\n                    <td style='text-align: center;'>Thursday</td>\n                    <td style='text-align: center;'>Friday</td>\n                    <td style='text-align: center;'>Saturday</td>\n                </tr>\n            </thead>\n            <tbody id='calendarBody'></tbody>`\n        );\n\n        const calendar = d3.select(\"#calendar\");\n\n        calendar\n          .select(\"#currentMonth\")\n          .data([monthName])\n          .join(\"h2\")\n          .text((d) => d);\n\n        const tbody = calendar.select(\"#calendarBody\");\n\n        const rows = tbody.selectAll(\"tbody\").data(monthDays).join(\"tr\");\n\n        const earlierDay = question.question.dateEarlier.getDate();\n        const laterDay = question.question.dateLater.getDate();\n        rows\n          .selectAll(\"td\")\n          .data((d) => d)\n          .join(\"td\")\n          .attr(\"class\", function (d) {\n            return d > 0 ? \"calendarDay\" : \"calendarDayEmpty\";\n          })\n          .attr(\"id\", (d) => \"calendarDay-\" + d)\n          .html((d) => {\n            if (d === earlierDay || d === laterDay) {\n              return `<div>${d}</div><svg id='${\n                d === earlierDay ? \"earlierAmount\" : \"laterAmount\"\n              }'></svg>`;\n            } else if (d > 0) {\n              return d;\n            } else {\n              return \"\";\n            }\n          });\n\n        const earlierAmountSVG = rows.select(\"#earlierAmount\");\n\n        earlierAmountSVG\n          .select(\"text\")\n          .data([question.question.amountEarlier])\n          .join(\"text\")\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"class\", \"earlier-amount\")\n          .text((d) => d);\n\n        //   .text(function (d) {\n        //     return d > 0 ? d : \"\";\n        //   });\n\n        // const cellId = \"#calendarDay-\" + question.dateEarlier.getDay();\n        // const earlierDayCell = rows.select(cellId);\n        // const earlierDayHTML = `<td id=\"${cellId}`\n\n        // earlierDayCell.html(earlierDayCell.node() + '<svg id=\"\"></svg>')\n        // rows.select(cellId).data([question.amountEarlier]).join(\"svg\");\n      }, question)}\n      style={style}\n    ></table>\n  );\n}\n\nexport default Calendar;\n","import { Container, Row, Col } from \"react-bootstrap\";\nimport MELForm from \"./MELForm\";\nimport BarChart from \"./BarChart\";\nimport Calendar from \"./Calendar\";\nimport { useSelector } from \"react-redux\";\nimport { ViewType } from \"../features/ViewType\";\nimport { selectCurrentQuestion } from \"../features/questionSlice\";\n\nexport function Survey() {\n  const question = useSelector(selectCurrentQuestion);\n\n  return (\n    <Container fluid>\n      <Row>\n        <Col>\n          {question.viewType === ViewType.barchart ? (\n            <BarChart\n              top_margin=\"20\"\n              right_margin=\"30\"\n              bottom_margin=\"30\"\n              left_margin=\"80\"\n            />\n          ) : question.viewType === ViewType.word ? (\n            <MELForm />\n          ) : (\n            <Calendar\n              top_margin=\"20\"\n              right_margin=\"20\"\n              bottom_margin=\"30\"\n              left_margin=\"30\"\n            />\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default Survey;\n","import { useDispatch } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport { setTreatmentId } from \"../features/questionSlice\";\n\nexport function QueryParam() {\n  const dispatch = useDispatch();\n  const search = useLocation().search;\n  const treatmentId = new URLSearchParams(search).get(\"treatment_id\");\n  dispatch(setTreatmentId(treatmentId));\n  return \"\";\n}\n\nexport default QueryParam;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { BrowserRouter, Route, Switch, Link, Redirect } from \"react-router-dom\";\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Button } from \"react-bootstrap\";\nimport \"./App.css\";\nimport Survey from \"./components/Survey\";\nimport { QueryParam } from \"./components/QueryParam\";\nimport {\n  fetchQuestions,\n  selectAllQuestions,\n  startSurvey,\n  writeAnswers,\n  setParticipant,\n} from \"./features/questionSlice\";\nimport { ViewType } from \"./features/ViewType\";\nimport { FileIOAdapter } from \"./features/FileIOAdapter\";\nimport {\n  fetchTreatmentId,\n  fetchCurrentTreatment,\n} from \"./features/questionSlice\";\n\nconst App = () => {\n  return (\n    <div>\n      <BrowserRouter>\n        <div className=\"App\">\n          <QueryParam />\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path={\"/instructions\"} component={Instructions} />\n            <Route path=\"/survey\" component={Survey} />\n            <Route path=\"/thankyou\" component={ThankYou} />\n            <Route path=\"/*\" component={Home} />\n          </Switch>\n        </div>\n      </BrowserRouter>\n    </div>\n  );\n};\n\nexport default App;\n\nconst Home = () => {\n  const treatmentId = useSelector(fetchTreatmentId);\n  return (\n    <div id=\"home-text\">\n      {treatmentId === null ? (\n        <div>\n          <p>\n            We shouldn not see this page since the participants will be provided\n            a link with the treatment id in the URL.\n          </p>\n          <p>Click a link below to launc one of the experiments.</p>\n          <p>\n            <a href=\"https://github.com/pcordone/vizsurvey\">Github README.md</a>\n          </p>\n          <p>\n            <a href=\"https://pcordone.github.io\">public website</a>\n          </p>\n          <p>\n            <a\n              id=\"word-no-titration\"\n              href=\"vizsurvey/instructions?treatment_id=1\"\n            >\n              Worded with no titration and not draggable.\n            </a>\n          </p>\n          <p>\n            <a\n              id=\"barchart-no-titration\"\n              href=\"vizsurvey/instructions?treatment_id=2\"\n            >\n              Barchart with no titration and not draggable.\n            </a>\n          </p>\n          <p>\n            <a id=\"barchart-drag\" href=\"vizsurvey/instructions?treatment_id=3\">\n              Barchart draggable.\n            </a>\n          </p>\n          <p>\n            <a id=\"word-titration\" href=\"vizsurvey/instructions?treatment_id=4\">\n              Word titration.\n            </a>\n          </p>\n          <p>\n            <a\n              id=\"barchart-titration\"\n              href=\"vizsurvey/instructions?treatment_id=5\"\n            >\n              Barchart titration.\n            </a>\n          </p>\n        </div>\n      ) : (\n        <Redirect to={`/instructions?treatment_id=${treatmentId}`} />\n      )}\n    </div>\n  );\n};\n\nconst Instructions = () => {\n  var handle = useFullScreenHandle();\n  const dispatch = useDispatch();\n  dispatch(fetchQuestions());\n  const treatment = useSelector(fetchCurrentTreatment);\n\n  function surveyButtonClicked() {\n    dispatch(startSurvey());\n    handle.enter;\n  }\n\n  return (\n    <div id=\"home-text\">\n      {treatment.viewType === ViewType.barchart ? (\n        <div>\n          Click on the bar that represents the amount that you would like to\n          receive.\n        </div>\n      ) : treatment.viewType === ViewType.word ? (\n        <div>\n          Click on the radio button that contains the amount you would like to\n          receive.\n        </div>\n      ) : treatment.viewType === ViewType.calendar ? (\n        <div>\n          Click on the day that contains the amount that you would like to\n          receive.\n        </div>\n      ) : (\n        <div>\n          Cannot display <b>specific</b> instructions since a treatment has not\n          been selected. Please select a treatment\n        </div>\n      )}\n      <FullScreen handle={handle}>\n        <Link to=\"/survey\">\n          <Button size=\"lg\" onClick={surveyButtonClicked}>\n            Start Survey\n          </Button>\n        </Link>\n      </FullScreen>\n    </div>\n  );\n};\n\nconst ThankYou = () => {\n  const dispatch = useDispatch();\n  const uuid = uuidv4();\n  dispatch(setParticipant(uuid));\n  const answers = useSelector(selectAllQuestions);\n  const io = new FileIOAdapter();\n  const csv = io.convertToCSV(answers);\n  dispatch(writeAnswers(csv));\n  const handle = useFullScreenHandle();\n\n  return (\n    <FullScreen handle={handle}>\n      <div>\n        <p>\n          Your answers have been submitted. Thank you for taking this survey!\n        </p>\n        <p>\n          Your unique ID is: {uuid}. Please go back to Amazon Turk and present\n          this unique ID in the form.\n        </p>\n        <Button\n          size=\"lg\"\n          onClick={() => {\n            handle.enter();\n            setTimeout(() => {\n              handle.exit();\n            }, 400);\n          }}\n        >\n          Exit Fullscreen\n        </Button>\n      </div>\n    </FullScreen>\n  );\n};\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { enableAllPlugins } from \"immer\";\n\nimport { Provider } from \"react-redux\";\nimport { store } from \"./app/store\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nenableAllPlugins();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}